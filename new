-- Sozdaem BD
CREATE DATABASE TK;
-- Sozdaem tablitsi v BD
CREATE TABLE SoldThings(                                  -- создаем таблицу SoldThings продаем вещи
	id INT NOT NULL PRIMARY KEY,                      -- первичный ключ, не может быть неопределим 
 	dataSell date,                                    -- поле дата продажи
	HM_SellThings int, 			          -- количество проданного товара
	Cost1ye decimal(5,2)				  -- стоимость за ед.товара
);
CREATE SEQUANCE id.SoldThings minvalue 1 start with 1 cache 100; -- создаем последовательность на первичный ключ(инкрементация)

CREATE TABLE Sellers(					  -- создаем таблицу Sellers продавцы
	id INT NOT NULL PRIMARY KEY,	                  -- первичный ключ,не может быть неопределим 
	idSeller INT NOT NULL ,
	NameSeller varchar(30),				  -- Фамилия продавца
	FOREIGN KEY(idSeller) REFERENCES SoldThings(id)   -- внешний ключ SoldThings
        ON UPDATE CASCADE
);	
CREATE SEQUANCE id.Sellers minvalue 1 start with 1 cache 100; -- создаем последовательность на первичный ключ(инкрементация)


CREATE TABLE Things(					  -- создаем таблицу
	id INT NOT NULL PRIMARY KEY,  	                  -- первичный ключ
	idThing INT NOT NULL ,				  -- id товара 	
	NameThing varchar(30),				  -- наименованеи товара
	idKateg INT NOT NULL, 				  -- id категория товара
	FOREIGN KEY(idThing) REFERENCES SoldThings(id)	  -- внешний ключ на таблицу проданных товаров
        ON UPDATE CASCADE
);	
CREATE SEQUANCE id.Things minvalue 1 start with 1 cache 100; -- создаем последовательность на первичный ключ(инкрементация)


INSERT INTO SoldThings(id, dataSell, HM_SellThings, Cost1ye) VALUE (1,'2020-11-22',2,300.00);
INSERT INTO Sellers(id,idSeller,NameSaller) VALUE (1,1,Petrov);
INSERT INTO Things(id,idThing,NameThing,Kateg) VALUE (1,1,'sausage','meat products');
